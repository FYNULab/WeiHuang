C51 COMPILER V9.01   MAIN                                                                  04/27/2019 17:56:45 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\keil4\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          
   2          /***************************************************************************************************    
   3          工程名称：      smg_scan
   4          功能描述：      控制数码管8位动态扫描显示01234567 
   5          硬件连接：  用8位杜邦线将J8与J12连接，2位杜邦线分别将J11_0与J15_DS1、J11_1与J15_DS2连接。
   6          维护记录：  2011-8-22
   7          ***************************************************************************************************/
   8          #include "reg51.h"       //包含头文件
   9          
  10          sbit LE1=P2^0;           //位选573锁存器使能
  11          sbit LE2=P2^1;           //段选573锁存器使能
  12          
  13          
  14          #define uchar unsigned char
  15          #define uint  unsigned int
  16          
  17          uchar wei;
  18          uchar   i;
  19          
  20          uchar code dis[16]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,
  21                             //  0    1    2    3    4    5    6    7    
  22                               0x7F,0x6F,0x77,0x7C,0x39,0x5E,0x79,0x71};//0~F的段码
  23                             //  8    9    A    B    C    D    E    F  
  24          
  25          
  26          //**************************************************************************************************
  27          //延时函数
  28          //**************************************************************************************************
  29          delay(uint time)              //int型数据为16位,所以最大值为65535            
  30           {
  31   1        uint  i,j;                  //定义变量i,j,用于循环语句 
  32   1        for(i=0;i<time;i++)         //for循环,循环50*time次
  33   1           for(j=0;j<50;j++);       //for循环,循环50次
  34   1       }
  35          //**************************************************************************************************
  36          //动态扫描函数
  37          //**************************************************************************************************
  38          scan()
  39          {
  40   1           P1=~wei;                 //由于共阴，低电平来选通某1位，所以需取反
  41   1           LE1=1;                   //锁存位
  42   1           LE1=0;                   //断开锁存,位选573的Q7~Q0仍保持 
  43   1           wei<<=1;                 //左移一位 
  44   1      
  45   1           P1=dis[i];               //0~7的编码
  46   1           LE2=1;                   //锁存段码
  47   1           LE2=0;                   //断开锁存,段选573的Q7~Q0仍保持
  48   1           i++;                     //i加1
  49   1           delay(10);               //延时保持一下,延时过大会闪动，延时过小会有暗影    
  50   1           
  51   1           if(i==8){i=0;wei=0x01;}  //共8位,扫描到第8位时，重新扫描
  52   1            
  53   1      }
  54          //**************************************************************************************************
  55          //主函数
C51 COMPILER V9.01   MAIN                                                                  04/27/2019 17:56:45 PAGE 2   

  56          //**************************************************************************************************
  57          void main()                   //主函数
  58          {
  59   1           wei=0x01;                //初始化位为0x01,即为最高位
  60   1           i=0;                     //初始化段码为0
  61   1           while(1)                 //进入while死循环
  62   1            {
  63   2              scan();               //数码管扫描函数
  64   2            }         
  65   1      }
*** WARNING C290 IN LINE 34 OF MAIN.C: missing return value
*** WARNING C290 IN LINE 53 OF MAIN.C: missing return value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     91    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)

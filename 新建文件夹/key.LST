C51 COMPILER V9.01   KEY                                                                   04/15/2017 15:10:04 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN key.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE key.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1                                                                                                                                                                                                          
   2          /***************************************************************************************************    
   3          ¹¤³ÌÃû³Æ£º      4x4key_timer
   4          ¹¦ÄÜÃèÊö£º      ¶¨Ê±Æ÷ÖÐ¶Ï½øÐÐ¾ØÕó¼üÅÌÉ¨Ãè£¬ÊýÂë¹ÜÏÔÊ¾4x4¼üÅÌÉ¨ÃèµÄ½á¹û
   5          //     °´¼ü    É¨Ãè½á¹û |   °´¼ü   É¨Ãè½á¹û|  °´¼ü   É¨Ãè½á¹û |  °´¼ü   É¨Ãè½á¹û
   6          //     S1      0XEE     |   S5     0XDE    |  S9     0XBE     |  S13    0X7E
   7          //     S2      0XED     |   S6     0XDD    |  S10    0XBD     |  S14    0X7D
   8          //     S3      0XEB     |   S7     0XDB    |  S11    0XBB     |  S15    0X7B
   9          //     S4      0XE7     |   S8     0XD7    |  S12    0XB7     |  S16    0X77
  10          Ó²¼þÁ¬½Ó£º  ÓÃ8Î»¶Å°îÏß½«J8ÓëJ12Á¬½Ó£¬ÓÃ2Î»¶Å°îÏß·Ö±ð½«J11_0ÓëJ15_DS1¼°J11_1ÓëJ15_DS2Á¬½Ó£¬ÓÃ8Î»¶Å°îÏß½«J9
             -ÓëJ6Á¬½Ó
  11          Î¬»¤¼ÇÂ¼£º  2011-8-22
  12          ***************************************************************************************************/
  13          #include "key.h"       //°üº¬Í·ÎÄ¼þ
  14          
  15          //**************************************************************************************************
  16          //ÑÓÊ±º¯Êý
  17          //**************************************************************************************************
  18          void delay(uint time)              //intÐÍÊý¾ÝÎª16Î»,ËùÒÔ×î´óÖµÎª65535            
  19           {
  20   1        uint  i,j;                  //¶¨Òå±äÁ¿i,j,ÓÃÓÚÑ­»·Óï¾ä 
  21   1        for(i=0;i<time;i++)         //forÑ­»·,Ñ­»·50*time´Î
  22   1           for(j=0;j<50;j++);       //forÑ­»·,Ñ­»·50´Î
  23   1       }
  24                                    
  25          //**************************************************************************************************
  26          //¾ØÕó¼üÅÌÉ¨Ãè½á¹û´¦Àíº¯Êý
  27          //**************************************************************************************************
  28          uchar keyHandle()                     
  29          {
  30   1              uchar x,y,keyValue; 
  31   1        P3=0xf0;                              //P3¸³Öµ0xf0
  32   1        if((P3&0xf0)!=0xf0)                   //ÅÐ¶Ï¸ß4Î»ÊÇ·ñÎªÈ«1£¨¸ß4Î»È«1´ú±íÃ»°´¼ü°´ÏÂ£©
  33   1      
  34   1          {
  35   2            delay(20);                        //ÑÓÊ±È¥¶¶¶¯£¬Ò»°ãÎª5ms¡«10ms£¨ÓÉÓÚ»úÐµ´¥µãµÄµ¯ÐÔ×÷ÓÃ£¬°´¼üÔÚ±ÕºÏÊ
             -±²»»áÂíÉÏÎÈ¶¨µØ½ÓÍ¨£¬
  36   2                                                  //¶øÔÚ±ÕºÏË²¼ä°éËæÓÐÒ»Á¬´®µÄ¶¶¶¯£¬¼ü¶¶¶¯»áÒýÆðÒ»´Î°´¼ü±»Îó¶Á¶à´Î£©
  37   2            if((P3&0xf0)!=0xf0)               //Èç¹û»¹ÄÜ¼ì²âµ½ÓÐ¼üÅÌ°´ÏÂÈ¥ 
  38   2              {
  39   3                        x=P3&0xf0;                    //¶ÁÈ¡P3¿ÚÊý¾Ý
  40   3                P3=0x0f;                      //·´×ª£¬P3¸³Öµ0x0f             
  41   3                y=P3&0x0f;                    //¶ÁÈ¡P3¿ÚÊý¾Ý
  42   3                keyValue=x|y;                 //µÃµ½É¨Ãè½á¹û
  43   3              }
  44   2          }
  45   1        switch(keyValue)
  46   1        {
  47   2         case 0xee:{return(0);break;}    //¶ÔÓ¦°´¼üS1
  48   2         case 0xde:{return(1);break;}    //¶ÔÓ¦°´¼üS2 
  49   2         case 0xbe:{return(2);break;}    //¶ÔÓ¦°´¼üS3 
  50   2         case 0x7e:{return(3);break;}    //¶ÔÓ¦°´¼üS4 
  51   2         case 0xed:{return(4);break;}    //¶ÔÓ¦°´¼üS5 
  52   2         case 0xdd:{return(5);break;}    //¶ÔÓ¦°´¼üS6 
  53   2         case 0xbd:{return(6);break;}    //¶ÔÓ¦°´¼üS7 
C51 COMPILER V9.01   KEY                                                                   04/15/2017 15:10:04 PAGE 2   

  54   2         case 0x7d:{return(7);break;}    //¶ÔÓ¦°´¼üS8 
  55   2         case 0xeb:{return(8);break;}    //¶ÔÓ¦°´¼üS9 
  56   2         case 0xdb:{return(9);break;}    //¶ÔÓ¦°´¼üS10        
  57   2         case 0xbb:{return(10);break;}   //¶ÔÓ¦°´¼üS11        
  58   2         case 0x7b:{return(11);break;}   //¶ÔÓ¦°´¼üS12
  59   2         case 0xe7:{return(12);break;}   //¶ÔÓ¦°´¼üS13        
  60   2         case 0xd7:{return(13);break;}   //¶ÔÓ¦°´¼üS14        
  61   2         case 0xb7:{return(14);break;}   //¶ÔÓ¦°´¼üS15        
  62   2         case 0x77:{return(15);break;}   //¶ÔÓ¦°´¼üS16
  63   2         default:{break;}     
  64   2        }
  65   1        return 0xff; 
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    181    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

C51 COMPILER V7.06   MAIN                                                                  07/28/2012 10:21:18 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          /***************************************************************************************************    
   2          工程名称：      HC595_led
   3          功能描述：      数据通过595串入并出，驱动8位发光二极管实现流水灯。
   4          硬件连接：  用8位杜邦线将J13与J16连接，用3位杜邦线分别将J8_5与J21_SH、J8_6与J21_ST、J8_7与J21_DS连接
   5          维护记录：  2011-8-22
   6          ***************************************************************************************************/
   7          #include "reg51.h"       //包含头文件
   8          sbit SH_CP=P1^5;         //表示用SH_CP等效于P1^5, P1^0就是指头文件里定义的P1寄存器的第5BIT
   9          sbit ST_CP=P1^6;         
  10          sbit DS=P1^7;         
  11          
  12          #define uchar unsigned char
  13          #define uint  unsigned int
  14          //**************************************************************************************************
  15          //延时函数
  16          //**************************************************************************************************
  17          delay(uint time)         //int型数据为16位,所以最大值为65535            
  18           {
  19   1        uint  i,j;             //定义变量i,j,用于循环语句 
  20   1        for(i=0;i<time;i++)    //for循环,循环50*time次
  21   1           for(j=0;j<50;j++);  //for循环,循环50次
  22   1       }
  23          //**************************************************************************************************
  24          //向74595写一字节数据
  25          //**************************************************************************************************
  26          wbyte_595(uchar temp)               
  27           {
  28   1           uchar i;                      //定义循环变量
  29   1           ST_CP=0;                      //置为低电平
  30   1           for(i=0;i<8;i++)              //循环8次，写入1字节
  31   1            {
  32   2             SH_CP=0;                    //时钟置为低电平
  33   2             if((temp & 0x80)!=0)  DS=1; //如果最高位为1，发送数据1
  34   2               else DS=0;                //如果最高位为0，发送数据0
  35   2             SH_CP=1;                    //数据在SHcp的上升沿输入到移位寄存器中
  36   2             temp<<=1;                   //左移1位，准备写入下1位数据
  37   2            }
  38   1          ST_CP=1;                       //上升沿时移位寄存器的数据进入数据存储寄存器
  39   1          delay(10);                     //延时
  40   1       }
  41          //**************************************************************************************************
  42          //主函数
  43          //**************************************************************************************************
  44          void main()             //主函数
  45          {
  46   1       uchar  i,j;            //定义变量i,j;
  47   1       while(1)               //进入while死循环
  48   1        {                     
  49   2         j=0x01;              //0x01即为二进制0000 0001,即最低位为1,其他位为0
  50   2         for(i=0;i<8;i++)     //进入for循环,循环8次
  51   2           {
  52   3            wbyte_595(~j);    //依次循环点亮8位LED的1位，取反是由于低电平点亮LED
  53   3            delay(5000);      //延时，修改延时即可修改时间间隔 
  54   3            j<<=1;            //j左移1位，等效于j=j<<1
  55   3           }        
C51 COMPILER V7.06   MAIN                                                                  07/28/2012 10:21:18 PAGE 2   

  56   2        }         
  57   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     98    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

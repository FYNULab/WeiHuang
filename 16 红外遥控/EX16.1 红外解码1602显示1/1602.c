/**************************************************************************************************/
#include "reg51.h"          //包含头文件
#define uchar unsigned char
#define uint  unsigned int

extern delay(uint time); 
extern uchar dis2[16];

sbit rs=P2^5;    //命令/数据选择
sbit rw=P2^4;    //读写口
sbit  e=P2^3;    //锁存控制

uchar data  dis1[16]={"The code now is:"};     //显示两行
//**************************************************************************************************
//向LCD写一命令
//**************************************************************************************************
wcode(uchar t)
{
  rs=0;           // 写的是命令
  rw=0;           // 写状态
  e=1;            //使能
  P0=t;           //写入命令 
  delay(20);      //等待写入,如果时间太短，会导致液晶无法显示
  e=0;            //数据的锁定
}
//**************************************************************************************************
//向LCD写一数据
//**************************************************************************************************
wdata(uchar t)
{
  rs=1;          // 写的是数据
  rw=0;          // 写状态
  e=1;           //使能
  P0=t;          //写入数据
  delay(20);     //等待写入,如果时间太短，会导致液晶无法显示
  e=0;           //数据的锁定
}
//************************************************************************************
//功能：LCD显示
//************************************************************************************
show()
{
  uchar i;
  wcode(0xc4); 
  for(i=0;i<12;i++)
   {
    wcode(0xc4+i); 
    wdata(dis2[i]);
   }
}
//**************************************************************************************************
//LCD 初始化
//**************************************************************************************************
InitLCD()
   {  
  uchar i;		 
  wcode(0x01);	  //清屏
  wcode(0x06);   //输入方式控制,增量光标不移位
  wcode(0x0e);   //显示开关控制
  wcode(0x38);   //功能设定:设置16x2显示，5x7显示,8位数据接口    

  for(i=0;i<16;i++)
   {
    wcode(0x80+i); 
    wdata(dis1[i]);
   }
	
   }  

C51 COMPILER V7.06   MAIN                                                                  07/28/2012 15:58:43 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          
   2          /***************************************************************************************************    
   3          工程名称：      timer
   4          功能描述：      定时器0实现1s定时，流水灯显示上的数据每秒加1
   5          硬件连接：  用8位杜邦线将J8与J13连接
   6          维护记录：  2011-8-22
   7          ***************************************************************************************************/
   8          #include "reg51.h"       //包含头文件
   9          
  10          sbit LE1=P2^0;           //位选573锁存器使能
  11          sbit LE2=P2^1;           //段选573锁存器使能
  12          
  13          #define uchar unsigned char
  14          #define uint  unsigned int
  15           
  16          uchar temp,num;          //定义变量
  17          //**************************************************************************************************
  18          //定时器中断子程序
  19          //**************************************************************************************************
  20          t0() interrupt 1 using 1
  21          {
  22   1        TH0=0x3c;         //重置定时器初值
  23   1        TL0=0xb0;
  24   1        if(temp>=19)      //满20次，即20次*50ms=1s
  25   1         {
  26   2           temp=0x00;     //重置temp为0
  27   2           num++;         //显示变化一次
  28   2           P1=~num;       //将变化次数放在P1控制的LED上显示
  29   2         }
  30   1        else
  31   1         {
  32   2           temp++;        //每进一次中断，temp加1
  33   2         }
  34   1      }
  35          //**************************************************************************************************
  36          //主函数
  37          //**************************************************************************************************
  38          main()
  39          {
  40   1         TMOD=0x01;    //0b00000001  用的是定时器0，工作在方式1（16位寄存器）
  41   1                       //要实现定时50ms,(65536-T0)x12/12000000=0.05s得T0=15536即0x3cb0
  42   1         TH0=0x3c;     //装定时器初值高8位
  43   1         TL0=0xb0;     //装定时器初值低8位
  44   1         TR0=1;        //启动定时器0
  45   1         ET0=1;        //开定时器0中断
  46   1         EA=1;         //开总中断
  47   1      
  48   1         while(1);     //死循环，等待定时器中断
  49   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     53    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V7.06   MAIN                                                                  07/28/2012 15:58:43 PAGE 2   

   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

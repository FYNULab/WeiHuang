C51 COMPILER V7.06   1602                                                                  10/14/2014 21:10:34 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE 1602
OBJECT MODULE PLACED IN 1602.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 1602.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          /***************************************************************************************************    
   2          工程名称：      1602
   3          功能描述：  实现1602液晶显示，液晶第一行显示"  Welocome  To  "，第二行显示" www.hrbnbc.com "。
   4          硬件连接：  将1602液晶接口对应插接到P4接口，注意1-16脚不要插反（有些厂家的液晶顺序是反的）。
   5          维护记录：  2011-8-22
   6          ***************************************************************************************************/
   7          #include "reg51.h"          //包含头文件
   8          #define uchar unsigned char
   9          #define uint  unsigned int
  10          
  11          extern delay(uint time); 
  12          extern uchar  ge,shifen;
  13          
  14          sbit rs=P2^5;    //命令/数据选择
  15          sbit rw=P2^4;    //读写口
  16          sbit  e=P2^3;    //锁存控制
  17          
  18          uchar data  dis1[16]={"  Welocome  To  "};     //显示两行
  19          uchar data  dis2[16]={" www.hrbnbc.com "};
  20          //**************************************************************************************************
  21          //向LCD写一命令
  22          //**************************************************************************************************
  23          wcode(uchar t)
  24          {
  25   1        rs=0;           // 写的是命令
  26   1        rw=0;           // 写状态
  27   1        e=1;            //使能
  28   1        P0=t;           //写入命令 
  29   1        delay(20);      //等待写入,如果时间太短，会导致液晶无法显示
  30   1        e=0;            //数据的锁定
  31   1      }
  32          //**************************************************************************************************
  33          //向LCD写一数据
  34          //**************************************************************************************************
  35          wdata(uchar t)
  36          {
  37   1        rs=1;          // 写的是数据
  38   1        rw=0;          // 写状态
  39   1        e=1;           //使能
  40   1        P0=t;          //写入数据
  41   1        delay(20);     //等待写入,如果时间太短，会导致液晶无法显示
  42   1        e=0;           //数据的锁定
  43   1      }
  44          //************************************************************************************
  45          //功能：LCD显示
  46          //************************************************************************************
  47          show()
  48          {
  49   1        wcode(0x80); 
  50   1        wdata('T');wdata('h');wdata('e');wdata(' ');   //显示The 
  51   1        wdata('v');wdata('o');wdata('l');wdata('t');   //显示volt
  52   1        wdata(' ');wdata('n');wdata('o');wdata('w');   //显示now
  53   1        wdata(' ');wdata('i');wdata('s');wdata(':');   //显示is:
  54   1      
  55   1        wcode(0xcb);                       //设置第一行显示地址
C51 COMPILER V7.06   1602                                                                  10/14/2014 21:10:34 PAGE 2   

  56   1        wdata(ge+0x30);                    //显示0通道电压值个位 
  57   1        wdata('.');                        //显示小数点
  58   1        wdata(shifen+0x30);                //显示0通道电压值十分位        
  59   1        wdata('V');
  60   1      }
  61          //**************************************************************************************************
  62          //LCD 初始化
  63          //**************************************************************************************************
  64          InitLCD()
  65             {             
  66   1         wcode(0x01);   //清屏
  67   1         wcode(0x06);   //输入方式控制,增量光标不移位
  68   1         wcode(0x0e);   //显示开关控制
  69   1         wcode(0x38);   //功能设定:设置16x2显示，5x7显示,8位数据接口          
  70   1         }  


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    172    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     32    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

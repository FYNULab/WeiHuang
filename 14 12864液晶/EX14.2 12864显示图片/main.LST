C51 COMPILER V9.01   MAIN                                                                  10/07/2015 14:18:36 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /***************************************************************************************************    
   2          工程名称：      12864_pic
   3          功能描述：  实现12864液晶显示图片功能。
   4          硬件连接：  将12864液晶接口对应插接到P2接口，注意1-20脚不要插反。
   5          维护记录：  2011-8-22
   6          ***************************************************************************************************/
   7          #include "reg51.h"          //包含头文件
   8          #define uchar unsigned char
   9          #define uint  unsigned int
  10          
  11          sbit RS=P2^5;    //命令/数据选择
  12          sbit RW=P2^4;    //读写口
  13          sbit  E=P2^3;    //锁存控制
  14          sbit RES = P2^0; //复位
  15          sbit PSB = P2^2; //串并选择
  16          
  17          uchar code pic[]=      // 图片代码
  18          {
  19          0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  20          0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  21          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  22          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  23          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  24          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  25          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  26          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  27          0xC0,0x1F,0xFF,0x81,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  28          0xC0,0x1F,0xFF,0x81,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  29          0xC0,0x18,0x01,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x08,0x00,0x00,0x00,0x03,
  30          0xC0,0x1F,0xFF,0x80,0x00,0x00,0x04,0x07,0x81,0xE0,0x10,0x10,0x03,0xC0,0x30,0x03,
  31          0xC0,0x1F,0xFF,0x80,0x00,0x00,0x0C,0x0C,0xC3,0x30,0x08,0x20,0x0C,0xE0,0x70,0x03,
  32          0xC0,0x18,0x01,0x87,0xFF,0xFE,0x3C,0x18,0x66,0x18,0x04,0x40,0x0C,0x60,0x70,0x03,
  33          0xC0,0x1F,0xFF,0x87,0xFF,0xFE,0x0C,0x18,0x66,0x18,0x02,0x80,0x18,0x00,0xB0,0x03,
  34          0xC0,0x1F,0xFF,0x80,0x06,0x00,0x0C,0x18,0x66,0x18,0x01,0x00,0x1B,0x81,0x30,0x03,
  35          0xC0,0x01,0x98,0x00,0x06,0x00,0x0C,0x00,0xE3,0x30,0x02,0x80,0x1C,0xC1,0x30,0x03,
  36          0xC0,0x19,0x99,0x80,0x66,0x60,0x0C,0x00,0xC1,0xE0,0x04,0x40,0x18,0x62,0x30,0x03,
  37          0xC0,0x19,0x99,0x80,0x66,0x30,0x0C,0x01,0x83,0x30,0x08,0x20,0x18,0x66,0x30,0x03,
  38          0xC0,0x0D,0x9B,0x00,0xC6,0x38,0x0C,0x03,0x06,0x18,0x10,0x10,0x18,0x67,0xFC,0x03,
  39          0xC0,0x0D,0x9B,0x01,0xC6,0x1C,0x0C,0x06,0x06,0x18,0x20,0x08,0x18,0x60,0x30,0x03,
  40          0xC0,0x01,0x98,0x03,0x86,0x0C,0x0C,0x0C,0x06,0x18,0x00,0x00,0x08,0x60,0x30,0x03,
  41          0xC0,0x7F,0xFF,0xE3,0x06,0x00,0x0C,0x18,0x03,0x30,0x00,0x00,0x0C,0xC0,0x30,0x03,
  42          0xC0,0x7F,0xFF,0xE0,0x1E,0x00,0x0C,0x1F,0xE1,0xE0,0x00,0x00,0x07,0x80,0x30,0x03,
  43          0xC0,0x00,0x00,0x00,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  44          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  45          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  46          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  47          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  48          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  49          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  50          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  51          0xC0,0x00,0x00,0x00,0x00,0x00,0x0C,0x00,0x00,0x18,0x00,0x00,0x00,0x06,0x0C,0x03,
  52          0xC3,0xFF,0xFC,0x3F,0xF0,0x80,0x0C,0x00,0x3F,0x18,0x01,0xFF,0xFE,0x06,0x0C,0x03,
  53          0xC3,0xFF,0xFC,0x3F,0xF1,0x80,0x0F,0xFC,0x3F,0x18,0x01,0xFF,0xFE,0x06,0x0C,0x03,
  54          0xC3,0x0C,0x0C,0x0C,0xC3,0x00,0x0F,0xFC,0x33,0x7F,0xE1,0x86,0x06,0x06,0x0C,0x03,
  55          0xC3,0x1F,0xCC,0x0C,0xC6,0x00,0x0C,0x00,0x33,0x7F,0xE1,0x8F,0xE6,0x06,0x0C,0x03,
C51 COMPILER V9.01   MAIN                                                                  10/07/2015 14:18:36 PAGE 2   

  56          0xC3,0x3F,0xCC,0x0C,0xCC,0x00,0x0C,0x00,0x36,0x30,0x01,0x9F,0xE6,0x07,0xFF,0xE3,
  57          0xC3,0x79,0x8C,0x0C,0xC8,0x00,0xFF,0xF0,0x36,0x36,0x01,0xBC,0xC6,0x07,0xFF,0xE3,
  58          0xC3,0x6F,0x0C,0x7F,0xF0,0xC0,0xFF,0xF0,0x36,0x66,0x01,0xB7,0x86,0x06,0x00,0x03,
  59          0xC3,0x0F,0x0C,0x7F,0xF1,0x80,0xC0,0x30,0x36,0x7F,0xC1,0x87,0x86,0x06,0x00,0x03,
  60          0xC3,0x79,0xEC,0x0C,0xC3,0x00,0xC0,0x30,0x33,0x7F,0xC1,0xBC,0xF6,0x06,0x00,0x03,
  61          0xC3,0x76,0xEC,0x0C,0xC6,0x00,0xC0,0x30,0x33,0x06,0x01,0xBB,0x76,0x07,0xFF,0x03,
  62          0xC3,0x07,0x0C,0x0C,0xCC,0x20,0xFF,0xF0,0x33,0x06,0x01,0x83,0x86,0x07,0xFF,0x03,
  63          0xC3,0x03,0x0C,0x18,0xC8,0x60,0xFF,0xF0,0x3F,0x06,0x01,0x81,0x86,0x06,0x03,0x03,
  64          0xC3,0x1C,0x0C,0x18,0xC0,0xC0,0x00,0x00,0x3E,0xFF,0xE1,0x8E,0x06,0x06,0x03,0x03,
  65          0xC3,0x1F,0x0C,0x18,0xC1,0x81,0xB1,0x8C,0x30,0xFF,0xE1,0x8F,0x86,0x06,0x03,0x03,
  66          0xC3,0x03,0x0C,0x30,0xC7,0x01,0xB1,0x8C,0x30,0x06,0x01,0x81,0x86,0x0C,0x03,0x03,
  67          0xC3,0xFF,0xFC,0x70,0xDE,0x03,0x18,0xC6,0x30,0x06,0x01,0xFF,0xFE,0x0C,0x03,0x03,
  68          0xC3,0xFF,0xFC,0x20,0x18,0x03,0x18,0xC6,0x30,0x06,0x01,0xFF,0xFE,0x18,0x03,0x03,
  69          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  70          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  71          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  72          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  73          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  74          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  75          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  76          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  77          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  78          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  79          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  80          0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
  81          0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  82          0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  83          };
  84          uchar code pic1[]=      // 图片代码
  85          {
  86              0x00,0x00,0x00,0x01,0x85,0xFD,0x7D,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,
  87              0x00,0x00,0x00,0x0A,0x0B,0xD0,0x1B,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,
  88              0x00,0x00,0x00,0x07,0x0B,0xE0,0x06,0xBF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,
  89              0x00,0x00,0x00,0x1A,0x1F,0x80,0x01,0x5F,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,
  90              0x00,0x00,0x00,0x26,0x0F,0x00,0x00,0x15,0xFF,0xFF,0xFF,0xD0,0x00,0x80,0x00,0x00,
  91              0x00,0x00,0x00,0x14,0x5C,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xE0,0x02,0x00,0x00,0x00,
  92              0x00,0x00,0x00,0x18,0x1E,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xF0,0x01,0x00,0x00,0x00,
  93              0x00,0x00,0x00,0xA8,0xB8,0x00,0x00,0x01,0x7F,0xFF,0xFF,0xE8,0x00,0x00,0x00,0x00,
  94              0x00,0x00,0x00,0x31,0x38,0x00,0x00,0x00,0x9F,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,
  95              0x00,0x00,0x00,0xA0,0x60,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,
  96              0x00,0x00,0x00,0x62,0x70,0x00,0x00,0x00,0x1F,0xDF,0xFF,0xFC,0x00,0x00,0x00,0x00,
  97              0x00,0x00,0x01,0x40,0xC0,0x00,0x00,0x00,0x3F,0xDF,0xFF,0xF8,0x00,0x00,0x00,0x00,
  98              0x00,0x00,0x00,0xC1,0xE0,0x00,0x00,0x00,0x27,0xEF,0xFF,0xFC,0x00,0x00,0x00,0x00,
  99              0x00,0x00,0x02,0x81,0xE0,0x00,0x00,0x00,0x0F,0xF7,0xFF,0xFC,0x00,0x00,0x00,0x00,
 100              0x00,0x00,0x05,0x89,0x70,0x00,0x00,0x00,0x05,0xF7,0xFF,0xFE,0x00,0x08,0xC0,0x00,
 101              0x00,0x00,0x05,0x13,0x18,0x00,0x00,0x00,0x03,0xFB,0xFF,0xFE,0x00,0x14,0x80,0x00,
 102              0x00,0x00,0x03,0x0B,0x04,0x00,0x00,0x00,0x05,0xFB,0xFF,0xFF,0x00,0x3F,0xE0,0x00,
 103              0x00,0x00,0x0A,0xA6,0x00,0x00,0x00,0x00,0x0B,0xFD,0xFF,0xFE,0x00,0x2E,0xC0,0x00,
 104              0x00,0x00,0x06,0x17,0x80,0x00,0x00,0x00,0x02,0xFD,0xFF,0xFF,0x80,0x17,0x40,0x00,
 105              0x00,0x10,0x15,0x27,0xE0,0x00,0x00,0x00,0x0F,0xFC,0xFF,0xFF,0x00,0x0D,0x80,0x00,
 106              0x00,0x04,0x0E,0xAE,0x70,0x00,0x00,0x00,0x01,0xFE,0xFF,0xFF,0x80,0x05,0x00,0x00,
 107              0x00,0x08,0x18,0x8E,0x78,0x00,0x00,0x00,0x0F,0xFE,0xFF,0xEF,0x80,0x02,0x00,0x00,
 108              0x00,0x00,0x0D,0x4F,0x5C,0x00,0x03,0xF0,0x01,0xFF,0x7F,0xFF,0xC0,0x00,0x00,0x00,
 109              0x00,0x00,0x16,0x91,0xB8,0x00,0x05,0xFE,0x07,0xFE,0x7F,0xF7,0xC0,0x00,0x04,0x00,
 110              0x00,0x00,0x15,0x98,0x1C,0x00,0x00,0x0F,0x80,0xFF,0xBF,0xFF,0xE0,0x00,0x14,0x00,
 111              0x00,0x00,0x2A,0xA0,0x00,0x00,0x00,0x01,0xC7,0xFF,0x7F,0xFB,0xE0,0x00,0x08,0x00,
 112              0x00,0x00,0x25,0xA0,0x00,0x00,0x00,0x00,0xC0,0xFF,0xBF,0xFF,0xE0,0x00,0x00,0x00,
 113              0x00,0x00,0x2F,0x40,0x00,0x00,0x06,0x80,0x42,0xFF,0xBF,0xFB,0xF0,0x00,0x00,0x00,
 114              0x00,0x00,0x2B,0x80,0x00,0x00,0x0B,0xE0,0x2A,0xFF,0xDF,0xFF,0xF0,0x00,0x00,0x00,
 115              0x00,0x00,0x37,0x00,0x00,0x00,0x33,0xF0,0x07,0xFF,0xBF,0xFC,0xF0,0x00,0x00,0x00,
 116              0x00,0x00,0x2E,0x80,0x00,0x00,0x32,0xF8,0x00,0xFF,0xEF,0xFE,0xF8,0x00,0x00,0x00,
 117              0x00,0x00,0x7D,0x00,0x00,0x00,0x03,0xD8,0x07,0xFF,0xBF,0xFF,0x38,0x00,0x68,0x00,
C51 COMPILER V9.01   MAIN                                                                  10/07/2015 14:18:36 PAGE 3   

 118              0x00,0x00,0x3D,0x00,0x00,0x00,0x03,0xBC,0x01,0xFF,0xDF,0xFF,0xB8,0x00,0x56,0x00,
 119              0x00,0x00,0x7E,0x00,0x00,0x00,0x00,0x2C,0x0B,0xFF,0xFF,0xFF,0x98,0x00,0xFC,0x00,
 120              0x00,0x00,0x7F,0x00,0x00,0x00,0x00,0x00,0x05,0xFF,0xDB,0xFF,0xDC,0x00,0x34,0x00,
 121              0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x07,0xFF,0xDF,0xFF,0xCC,0x00,0x28,0x00,
 122              0x1B,0x00,0xDE,0x00,0x00,0x00,0x00,0x00,0x0B,0xFF,0xDF,0xFF,0xCC,0x00,0x10,0x00,
 123              0x2A,0x81,0xFE,0x00,0x00,0x00,0x00,0x00,0x17,0xFF,0xED,0xFF,0x4C,0x00,0x00,0x00,
 124              0x1F,0x80,0xFE,0x00,0x00,0x00,0x00,0x00,0x0B,0xFF,0xFF,0xFF,0xCE,0x00,0x00,0x00,
 125              0x16,0x01,0xFE,0x00,0x00,0x00,0x00,0x00,0x57,0xFF,0xFD,0xFF,0xCC,0x00,0x00,0x00,
 126              0x0A,0x01,0x7E,0x00,0x00,0x00,0x00,0x00,0x17,0xFF,0xBF,0xFF,0xC6,0x00,0x00,0x00,
 127              0x04,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x5F,0xFF,0xBE,0xFF,0x8E,0x08,0x00,0x00,
 128              0x00,0x01,0x7E,0x00,0x00,0x00,0x00,0x00,0x2F,0xEF,0xFF,0xFF,0xEE,0x02,0x00,0x00,
 129              0x00,0x00,0x7F,0x00,0x00,0x00,0x00,0x00,0x3F,0xFF,0xEF,0x7F,0xCC,0x04,0x00,0x00,
 130              0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x5F,0xFF,0xF7,0xFF,0xEE,0x00,0x00,0x00,
 131              0x00,0x00,0x3B,0x00,0x00,0x00,0x00,0x00,0x7C,0xFF,0xEE,0xBF,0xCE,0x00,0x00,0x00,
 132              0x00,0x00,0x1D,0x00,0x00,0x00,0x00,0x00,0xBF,0x3F,0xF7,0xFF,0xEE,0x00,0x00,0x00,
 133              0x00,0x00,0x37,0x80,0x80,0x00,0x00,0x01,0x7F,0xFF,0xFF,0xDF,0xFC,0x00,0x00,0x00,
 134              0x00,0x00,0x1B,0x80,0x60,0x00,0x00,0x00,0x7F,0xFF,0xF7,0xFF,0xFE,0x00,0x00,0x00,
 135              0x00,0x00,0x1A,0x80,0x15,0x40,0x00,0x02,0xFF,0xFF,0xF7,0xBF,0xFC,0x00,0x00,0x00,
 136              0x00,0x00,0x0A,0x40,0x0F,0xFC,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x0A,0x00,
 137              0x00,0x00,0x08,0xC0,0x00,0xFC,0x00,0x02,0xFF,0xFF,0xFB,0xDF,0xF4,0x00,0x04,0x00,
 138              0x00,0x00,0x04,0x40,0x01,0xE0,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,
 139              0x00,0x00,0x04,0x60,0x00,0x00,0x00,0x07,0xFF,0xFF,0xFB,0xDF,0xF8,0x00,0x00,0x00,
 140              0x00,0x00,0x01,0x60,0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xEF,0xF8,0x00,0x00,0x00,
 141              0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,
 142              0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xDF,0xF0,0x00,0x00,0x00,
 143              0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFD,0xFF,0xD0,0x00,0x00,0x00,
 144              0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,
 145              0x00,0x00,0x00,0x3C,0x00,0x00,0x00,0xBF,0xFF,0xFF,0xFF,0xEF,0xE0,0x00,0x00,0x00,
 146              0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,
 147              0x00,0x00,0x00,0x3F,0xC0,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xF7,0xFC,0x00,0x00,0x00,
 148              0x00,0x00,0x00,0x3F,0xF8,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xFB,0x00,0x00,0x00,
 149              0x00,0x00,0x00,0x7F,0xFC,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xF7,0xF4,0x00,0x00,0x00
 150          };
 151          //**************************************************************************************************
 152          //延时函数
 153          //**************************************************************************************************
 154          delay(uint time)         //int型数据为16位,所以最大值为65535            
 155           {
 156   1        uint  i,j;             //定义变量i,j,用于循环语句 
 157   1        for(i=0;i<time;i++)    //for循环,循环50*time次
 158   1           for(j=0;j<100;j++); //for循环,循环50次
 159   1       }
 160          //**************************************************************************************************
 161          //查忙
 162          //**************************************************************************************************
 163          checkbusy()           
 164          {
 165   1         RS=0;                   //命令/数据选择,为0时选择命令    
 166   1         RW=1;                   //读/写选择，为1时选择读
 167   1         E=1;                    //使能
 168   1         while((P0&0x80)==0x80); //查忙标志位，等待标志位为0，即表示写入完毕
 169   1         E=0;                    //关闭读写 
 170   1      }
 171          //**************************************************************************************************
 172          //向LCD写一命令
 173          //**************************************************************************************************
 174          wcode(uchar cmdcode)
 175          {
 176   1         checkbusy();            //查忙
 177   1         RS=0;                   //命令/数据选择,为0时选择命令 
 178   1         RW=0;                   //读/写选择，为0时选择写
 179   1         E=1;                    //使能
C51 COMPILER V9.01   MAIN                                                                  10/07/2015 14:18:36 PAGE 4   

 180   1         P0=cmdcode;             //送入命令
 181   1         delay(20);              //等待写入 
 182   1         E=0;                    //关闭读写
 183   1      }  
 184          //**************************************************************************************************
 185          //向LCD写一数据
 186          //**************************************************************************************************
 187          wdata(uchar dispdata)
 188          {
 189   1         checkbusy();            //查忙
 190   1         RS=1;                   //命令/数据选择,为1时选择数据
 191   1         RW=0;                   //读/写选择，为0时选择写
 192   1         E=1;                    //使能
 193   1         P0=dispdata;            //送入数据
 194   1         delay(20);              //等待写入 
 195   1         E=0;                    //关闭读写
 196   1      }
 197          //**************************************************************************************************
 198          //LCD 初始化
 199          //**************************************************************************************************
 200          InitLCD()
 201             {
 202   1         PSB=1;             //设置为8BIT并口工作模式
 203   1         RES=0;             //复位
 204   1         delay(10);         //延时
 205   1         RES=1;             //关复位
 206   1       
 207   1         wcode(0x30);       //选择基本指令集
 208   1         wcode(0x0c);       //开显示(无游标、不反白)
 209   1         wcode(0x01);       //清除显示，并且设定地址指针为00H
 210   1         wcode(0x06);       //指定在资料的读取及写入时，设定游标的移动方向及指定显示的移位
 211   1         wcode(0x01);       //清屏    
 212   1         }  
 213          //**************************************************************************************************
 214          //显示图片
 215          //**************************************************************************************************
 216          void picshow(uchar code *bmp)
 217          { 
 218   1       uchar i,j,k,up_down;
 219   1       up_down=0x80;             //先写上半屏
 220   1       wcode(0x34);              //设置图形模式
 221   1       wcode(0x36);              //设置图形模式
 222   1      for(k=0;k<2;k++)           //分上下半屏先后写入,所以循环2次，i为0时写上半屏，i为1时写下半屏
 223   1        {
 224   2         for(i=0;i<32;i++)       //上下半屏各32行，共64行     
 225   2          { 
 226   3            wcode(0x80 + i);     //设置垂直地址
 227   3            wcode(up_down);      //设置水平地址
 228   3            for(j=0;j<16;j++)    //写16个字节，16*8=128竖
 229   3             {
 230   4               wdata(*bmp);      //写入一字节
 231   4               bmp++;            //加1
 232   4             }
 233   3          }
 234   2          up_down=0x88;           //准备写下半屏
 235   2        }           
 236   1      }
 237          //**************************************************************************************************
 238          //主函数
 239          //**************************************************************************************************
 240          main()
 241          {  
C51 COMPILER V9.01   MAIN                                                                  10/07/2015 14:18:36 PAGE 5   

 242   1         InitLCD();                        //初始化液晶
 243   1         while(1)                          //进入死循环，防止看门狗复位
 244   1          {
 245   2           picshow(pic);                   //显示第1张图片
 246   2           delay(5000);                    //保持显示一段时间
 247   2           picshow(pic1);                  //显示第2张图片
 248   2           delay(5000);                    //保持显示一段时间  
 249   2          }
 250   1      }
*** WARNING C290 IN LINE 159 OF MAIN.C: missing return value
*** WARNING C290 IN LINE 170 OF MAIN.C: missing return value
*** WARNING C290 IN LINE 183 OF MAIN.C: missing return value
*** WARNING C290 IN LINE 196 OF MAIN.C: missing return value
*** WARNING C290 IN LINE 212 OF MAIN.C: missing return value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    232    ----
   CONSTANT SIZE    =   2048    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  5 WARNING(S),  0 ERROR(S)

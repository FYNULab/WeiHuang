C51 COMPILER V7.06   1602                                                                  07/28/2012 09:11:47 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE 1602
OBJECT MODULE PLACED IN 1602.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 1602.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          //公司：北方蓝芯科技开发有限公司
   2          //网址：www.hrbnbc.com
   3          //更多教程可登陆技术论坛www.hrbnbc.com/bbs对应版块下载，
   4          //所有教程一律免费下载
   5          /***************************************************************************************************    
   6          工程名称：      1602
   7          功能描述：  实现1602液晶显示，液晶第一行显示"  Welocome  To  "，第二行显示" www.hrbnbc.com "。
   8          硬件连接：  将1602液晶接口对应插接到P4接口，注意1-16脚不要插反（有些厂家的液晶顺序是反的）
   9                      注意：如果1602液晶不能正常显示，请尝试调节对比度。
  10          维护记录：  2011-8-22
  11          ***************************************************************************************************/
  12          #include "reg51.h"          //包含头文件
  13          #define uchar unsigned char
  14          #define uint  unsigned int
  15          
  16          sbit rs=P2^5;    //命令/数据选择
  17          sbit rw=P2^4;    //读写口
  18          sbit  e=P2^3;    //锁存控制
  19          
  20          uchar data  dis1[16]={" press any key! "};     //显示两行
  21          uchar data  dis2[16]={" www.hfwhdz.com "};
  22          
  23          uchar alaflag;
  24          extern uchar dtime[7][2];
  25          //**************************************************************************************************
  26          //延时函数
  27          //**************************************************************************************************
  28          delay(uint time)         //int型数据为16位,所以最大值为65535            
  29           {
  30   1        uint  i,j;             //定义变量i,j,用于循环语句 
  31   1        for(i=0;i<time;i++)    //for循环,循环50*time次
  32   1           for(j=0;j<100;j++); //for循环,循环50次
  33   1       }
  34          //**************************************************************************************************
  35          //向LCD写一命令
  36          //**************************************************************************************************
  37          wcode(uchar t)
  38          {
  39   1        rs=0;           // 写的是命令
  40   1        rw=0;           // 写状态
  41   1        e=1;            //使能
  42   1        P0=t;           //写入命令 
  43   1        delay(20);      //等待写入,如果时间太短，会导致液晶无法显示
  44   1        e=0;            //数据的锁定
  45   1      }
  46          //**************************************************************************************************
  47          //向LCD写一数据
  48          //**************************************************************************************************
  49          wdata(uchar t)
  50          {
  51   1        rs=1;          // 写的是数据
  52   1        rw=0;          // 写状态
  53   1        e=1;           //使能
  54   1        P0=t;          //写入数据
  55   1        delay(20);     //等待写入,如果时间太短，会导致液晶无法显示
C51 COMPILER V7.06   1602                                                                  07/28/2012 09:11:47 PAGE 2   

  56   1        e=0;           //数据的锁定
  57   1      }
  58          //**************************************************************************************************
  59          //LCD显示第一行
  60          //**************************************************************************************************
  61          xian1()
  62          {
  63   1        uchar i;
  64   1        wcode(0x80);          //设置第一行显示地址
  65   1        for(i=0;i<16;i++)     //循环16次，写完1行
  66   1          {
  67   2            wdata(dis1[i]);   //写入该行数据
  68   2          }
  69   1      }
  70          //**************************************************************************************************
  71          //LCD显示第二行
  72          //**************************************************************************************************
  73          xian2()
  74          {
  75   1         uchar i;
  76   1         wcode(0xc0);        //设置第二行显示地址
  77   1         for(i=0;i<16;i++)   //循环16次，写完1行
  78   1          {
  79   2            wdata(dis2[i]);  //写入该行数据
  80   2          }
  81   1      }
  82          //**************************************************************************************************
  83          //LCD 初始化
  84          //**************************************************************************************************
  85          InitLCD()
  86             {             
  87   1         wcode(0x01);   //清屏
  88   1         wcode(0x06);   //输入方式控制,增量光标不移位
  89   1         wcode(0x0e);   //显示开关控制
  90   1         wcode(0x38);   //功能设定:设置16x2显示，5x7显示,8位数据接口          
  91   1         }  


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    120    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     33    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

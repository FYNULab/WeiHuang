C51 COMPILER V7.06   MAIN                                                                  07/28/2012 15:56:09 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          
   2          /***************************************************************************************************    
   3          工程名称：      bz_happy
   4          功能描述：      控制蜂鸣器实现播放音乐"生日快乐"
   5          硬件连接：  用1位杜邦线将J10_0与J18_bz连接
   6          维护记录：  2011-8-22
   7          ***************************************************************************************************/
   8          #include<reg51.h>               //包含头文件
   9          sbit BZ=P0^0;                   //定义蜂鸣器控制管脚        
  10          #define uchar unsigned char     
  11          #define uint unsigned int
  12           
  13           uchar code SOUNDLONG[25]=        //"生日快乐"节拍
  14           {
  15            15,5,20,20,20,40,
  16            15,5,20,20,20,40,
  17            15,5,20,20,20,20,20,
  18            15,5,20,20,20,40
  19           };
  20          uchar code SOUNDTONE[25]=         //"生日快乐"音调
  21          {
  22           212,212,190,212,159,169,
  23           212,212,190,212,142,159,
  24           212,212,106,126,159,169,190,
  25           119,119,126,159,142,159      
  26          };
  27          //**************************************************************************************************
  28          //延时函数
  29          //**************************************************************************************************
  30          delay(uint time)              //int型数据为16位,所以最大值为65535            
  31           {
  32   1        uint  i,j;                  //定义变量i,j,用于循环语句 
  33   1        for(i=0;i<time;i++)         //for循环,循环50*time次
  34   1           for(j=0;j<50;j++);       //for循环,循环50次
  35   1       }
  36          //**************************************************************************************************
  37          //播放音调
  38          //**************************************************************************************************
  39          void Play_music()                          
  40          {
  41   1        uint Tone,Long;                 //定义音调变量
  42   1        uint i,j,k;                     //定义
  43   1           for(i=0;i<25;i++)            //"生日快乐"的25种音调
  44   1            {
  45   2                Tone=SOUNDTONE[i];      //读取音调
  46   2                Long=30*SOUNDLONG[i];   //读取节拍
  47   2                for(j=0;j<Long;j++)     //输出不同节拍
  48   2                 {
  49   3                  BZ=0;                 //关闭蜂鸣器
  50   3                  for(k=0;k<Tone;k++);  //Tone的不同来区分7种音调
  51   3                  BZ=1;                 //打开蜂鸣器
  52   3                  for(k=0;k<Tone;k++);  //Tone的不同来区分7种音调
  53   3              }
  54   2            }
  55   1      }
C51 COMPILER V7.06   MAIN                                                                  07/28/2012 15:56:09 PAGE 2   

  56          //**************************************************************************************************
  57          //主函数
  58          //**************************************************************************************************
  59          void main()
  60          {
  61   1       while(1)
  62   1        {
  63   2         Play_music();                  //播放音乐
  64   2         BZ=0;                          //关闭蜂鸣器
  65   2         delay(10000);                  //关闭蜂鸣器时间
  66   2        }
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    140    ----
   CONSTANT SIZE    =     50    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
